extends layout

block content
	h1 #{title}
	
	
	div(id="text") Hi
	div(id="barchart")
	
	script
		
		var data = !{JSON.stringify(topSchools)};
		var chart = c3.generate({
			bindto: '#barchart',
			data: {
			x: 'x',
			
			columns: [
					['x', '#{topSchools[0].INSTNM}','#{topSchools[1].INSTNM}','#{topSchools[2].INSTNM}','#{topSchools[3].INSTNM}','#{topSchools[4].INSTNM}'],
					['Enrollments', '#{topSchools[0].Total}', '#{topSchools[1].Total}', '#{topSchools[2].Total}','#{topSchools[3].Total}', '#{topSchools[4].Total}' ]			
			],

			type: 'bar',
			
			onclick: function (d, element) { console.log(data[d['x']].INSTNM);}
			},
			
			bar: {
				width: 25
			},
			
			axis: {
				rotated: true,
				x: {
					type: 'category',
					categories: ['#{topSchools[0].INSTNM}','#{topSchools[1].INSTNM}','#{topSchools[2].INSTNM}','#{topSchools[3].INSTNM}','#{topSchools[4].INSTNM}'],
				}
			},
			
			legend: {
				show: false
			},
			
			tooltip: {
				position: function (data, width, height, element) {
					return {bottom: 0, left: 0}
				}
			}
			
		});
		
		d3.selectAll('.tick')
			.on('click', function(value, index){
				var uy = data;
				window.location.href= "/chart/" + uy[value].UNITID;
			});